<!doctype html>
<html lang="zh-Hans">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>碰碰大柚子</title>
  <link rel="stylesheet" href="style.css?v=61">
</head>
<body>
  <div class="app">
    <header class="hero">
      <div class="brand">
        <img class="logo" src="logo.webp" alt="碰碰大柚子">
        <div class="title-block">
          <h1>碰碰大柚子</h1>
          <p class="subtitle">小柚子碰到一起变成大柚子</p>
        </div>
      </div>
    </header>

    <section class="score-pill" aria-label="分数面板">
      <div class="score-item">
        <span>分数</span>
        <strong id="score">0</strong>
      </div>
      <div class="score-divider" aria-hidden="true"></div>
      <div class="score-item">
        <span>最高分</span>
        <strong id="best">0</strong>
      </div>
    </section>

    <main class="stage">
      <section class="canvas-wrap" aria-label="游戏区域">
        <div class="stage-body">
          <div class="stage-header">
            <span>下一个</span>
            <div class="next-ball" id="nextBall">
              <div class="next-ball-inner"></div>
            </div>
          </div>
          <div class="game-viewport">
            <canvas id="world"></canvas>
          </div>
        </div>
        <div class="overlay" id="overlay" hidden>
          <div class="overlay-card">
            <h2>游戏结束</h2>
            <p>你的分数是 <strong id="finalScore">0</strong></p>
            <div class="ad-block" id="adBlock" hidden>
              <div class="ad-media">
                <img src="小广告.webp" alt="两秒广告占位">
                <div class="ad-timer" aria-live="polite">
                  <svg class="ad-timer-ring" viewBox="0 0 32 32" aria-hidden="true">
                    <circle class="ad-timer-bg" cx="16" cy="16" r="14.4"></circle>
                    <circle class="ad-timer-progress" id="adTimerArc" cx="16" cy="16" r="14.4"></circle>
                  </svg>
                  <span id="adTimer">2</span>
                </div>
              </div>
              <a class="button-link" href="https://youyouai.enactflow.com/" target="_blank" rel="noopener">去下载</a>
            </div>
            <div class="overlay-actions">
              <button id="shareBtn" type="button">生成分享图</button>
              <button id="restart2" type="button">再来一次</button>
            </div>
          </div>
        </div>
        <div class="overlay intro" id="intro">
          <aside class="tips intro-card" role="dialog" aria-modal="true" aria-labelledby="introTitle">
            <button class="intro-close" id="introClose" type="button" aria-label="关闭提示">×</button>
            <h2 id="introTitle">玩法提示</h2>
              <ul>
                <li>用手指拖动水果，再次点击扔下</li>
                <li>相同水果相撞会合成更大的一颗</li>
                <li>水果超过虚线，游戏结束</li>
              </ul>

            <div class="intro-actions">
              <button id="introStart" type="button">开始游戏</button>
            </div>
          </aside>
        </div>
      </section>
      <div class="stage-footer">柚柚AI出品</div>
    </main>
  </div>

  <div class="overlay share-overlay" id="sharePreview" hidden>
    <div class="share-preview">
      <button class="share-close" id="shareClose" type="button" aria-label="关闭分享">×</button>
      <img id="shareImage" alt="分享图预览">
      <p class="share-hint">长按保存图片</p>
    </div>
  </div>

  <script src="matter.min.js"></script>
  <script src="main.js?v=63"></script>
</body>
</html>
